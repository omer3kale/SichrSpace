# ── SichrPlace — Beta Profile ──
# Activate via environment: SPRING_PROFILES_ACTIVE=beta
#
# This profile is used for the public beta environment (thesis demo).
# ALL credentials come from environment variables — nothing hardcoded.
# The host machine (VPS / GitHub Codespace) must set these env vars.
#
# Compatible with both MSSQL and PostgreSQL depending on the
# DATABASE_URL format provided at runtime.

spring:
  datasource:
    url: ${DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    driver-class-name: ${DATABASE_DRIVER:com.microsoft.sqlserver.jdbc.SQLServerDriver}
  jpa:
    hibernate:
      ddl-auto: validate          # Schema managed by migration scripts; Hibernate validates only
    show-sql: false
    properties:
      hibernate:
        format_sql: false

server:
  port: ${PORT:8080}

app:
  jwtSecret: ${JWT_SECRET}
  jwtExpirationMs: ${JWT_EXPIRATION:86400000}
  jwtRefreshExpirationMs: ${JWT_REFRESH_EXPIRATION:604800000}

  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:https://sichrplace.com,https://www.sichrplace.com}

# ── Teaching note ──
# Students: Compare this file with application-local-mssql.yml.
# Notice how every value here is ${ENV_VAR} — no defaults for secrets.
# This means the app will FAIL to start if DATABASE_URL or JWT_SECRET
# are not set, which is exactly the behaviour we want in a real environment.
# 
# Question: Why is failing fast better than falling back to a default password?

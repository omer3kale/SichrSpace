<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employment Verification - SichrPlace</title>
  
  <!-- Favicon and Icons -->
  <link rel="icon" href="../img/favicon.ico" sizes="any">
  <link rel="icon" href="../img/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
  
  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    :root {
      --primary: #2563EB;
      --primary-dark: #1D4ED8;
      --primary-hover: #3B82F6;
      --secondary: #F8FAFC;
      --accent: #40E0D0;
      --success: #10B981;
      --warning: #F59E0B;
      --error: #EF4444;
      --text: #1F2937;
      --text-muted: #6B7280;
      --border: #E5E7EB;
      --card: #FFFFFF;
      --background: #F9FAFB;
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .header {
      background: var(--card);
      padding: 20px 0;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .logo {
      font-family: 'Poppins', sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-muted);
      font-size: 14px;
      padding: 8px 16px;
      border-radius: var(--radius);
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      background: var(--secondary);
      color: var(--text);
    }

    /* Page Title */
    .page-title {
      text-align: center;
      margin-bottom: 40px;
    }

    .page-title h1 {
      font-family: 'Poppins', sans-serif;
      font-size: 28px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .page-title .employment-logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #3B82F6, #1D4ED8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
    }

    .page-title p {
      font-size: 16px;
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Info Cards */
    .info-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .info-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--primary);
    }

    .info-card h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-card p {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* Rent Calculator */
    .rent-calculator {
      background: linear-gradient(135deg, #EFF6FF, #DBEAFE);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 30px;
      border: 2px solid var(--primary);
    }

    .rent-calculator h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .calculator-item {
      background: var(--card);
      padding: 15px;
      border-radius: var(--radius);
      text-align: center;
    }

    .calculator-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }

    .calculator-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
    }

    .calculator-input {
      width: 100%;
      padding: 10px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 14px;
      text-align: center;
    }

    /* Main Form */
    .employment-form {
      background: var(--card);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }

    .form-header {
      margin-bottom: 25px;
      text-align: center;
    }

    .form-header h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 20px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 10px;
    }

    .form-header p {
      font-size: 14px;
      color: var(--text-muted);
    }

    .form-section {
      margin-bottom: 25px;
    }

    .form-section h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: var(--text);
      font-size: 14px;
    }

    .form-group .required {
      color: var(--error);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-size: 14px;
      transition: border-color 0.3s ease;
      background: var(--card);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .form-group .form-help {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    .form-group .currency-input {
      position: relative;
    }

    .form-group .currency-input::before {
      content: '€';
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      font-weight: 500;
    }

    .form-group .currency-input input {
      padding-left: 30px;
    }

    /* Employment Type Cards */
    .employment-types {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .employment-type {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .employment-type:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
    }

    .employment-type.selected {
      border-color: var(--primary);
      background: linear-gradient(135deg, #EFF6FF, #DBEAFE);
    }

    .employment-type input[type="radio"] {
      display: none;
    }

    .employment-type-icon {
      font-size: 32px;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .employment-type-title {
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .employment-type-desc {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* File Upload */
    .file-upload {
      border: 2px dashed var(--border);
      border-radius: var(--radius);
      padding: 30px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      background: var(--secondary);
    }

    .file-upload:hover {
      border-color: var(--primary);
      background: var(--card);
    }

    .file-upload.dragover {
      border-color: var(--primary);
      background: rgba(37, 99, 235, 0.1);
    }

    .file-upload-icon {
      font-size: 48px;
      color: var(--text-muted);
      margin-bottom: 15px;
    }

    .file-upload-text {
      font-size: 16px;
      color: var(--text);
      margin-bottom: 5px;
    }

    .file-upload-hint {
      font-size: 14px;
      color: var(--text-muted);
    }

    .file-list {
      margin-top: 15px;
    }

    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: var(--secondary);
      border-radius: var(--radius);
      margin-bottom: 10px;
    }

    .file-info {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .file-remove {
      color: var(--error);
      cursor: pointer;
      padding: 5px;
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: var(--radius);
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: var(--secondary);
      color: var(--text);
      border: 2px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--border);
    }

    .btn-success {
      background: var(--success);
      color: white;
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-full {
      width: 100%;
      justify-content: center;
    }

    .btn-lg {
      padding: 15px 30px;
      font-size: 16px;
    }

    /* Alerts */
    .alert {
      padding: 15px;
      border-radius: var(--radius);
      margin-bottom: 20px;
      border-left: 4px solid;
    }

    .alert.success {
      background: #F0FDF4;
      border-color: var(--success);
      color: #166534;
    }

    .alert.warning {
      background: #FFFBEB;
      border-color: var(--warning);
      color: #92400E;
    }

    .alert.error {
      background: #FEF2F2;
      border-color: var(--error);
      color: #991B1B;
    }

    .alert.info {
      background: #EFF6FF;
      border-color: var(--primary);
      color: #1E40AF;
    }

    /* Results Section */
    .results-section {
      background: var(--card);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      display: none;
    }

    .results-header {
      text-align: center;
      margin-bottom: 25px;
    }

    .results-header h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 20px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 10px;
    }

    .qualification-status {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 25px;
    }

    .status-badge {
      padding: 15px 30px;
      border-radius: var(--radius);
      font-size: 18px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-badge.qualified {
      background: #DCFCE7;
      color: #166534;
      border: 2px solid var(--success);
    }

    .status-badge.warning {
      background: #FEF3C7;
      color: #92400E;
      border: 2px solid var(--warning);
    }

    .status-badge.rejected {
      background: #FEE2E2;
      color: #991B1B;
      border: 2px solid var(--error);
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .result-item {
      text-align: center;
      padding: 20px;
      border-radius: var(--radius);
      background: var(--secondary);
    }

    .result-value {
      font-size: 18px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .result-label {
      font-size: 12px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Loading States */
    .loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .loading::after {
      content: '';
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top: 2px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      .header-content {
        padding: 0 15px;
      }

      .page-title h1 {
        font-size: 24px;
        flex-direction: column;
        gap: 10px;
      }

      .info-section {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .employment-types {
        grid-template-columns: 1fr;
      }

      .calculator-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <a href="../index.html" class="logo">
        <i class="fas fa-shield-alt"></i> SichrPlace
      </a>
      <div class="nav-links">
        <a href="tenant-screening-dashboard.html">
          <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
        <a href="../applicant-dashboard.html">
          <i class="fas fa-user"></i> My Dashboard
        </a>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Page Title -->
    <div class="page-title">
      <h1>
        <div class="employment-logo">
          <i class="fas fa-briefcase"></i>
        </div>
        Employment Verification
      </h1>
      <p>Verify your income and employment status to meet the 3x rent rule required by German landlords.</p>
    </div>

    <!-- Info Section -->
    <div class="info-section">
      <div class="info-card">
        <h3><i class="fas fa-calculator"></i> 3x Rent Rule</h3>
        <p>German landlords typically require your monthly net income to be at least 3 times the monthly rent to ensure affordability.</p>
      </div>
      <div class="info-card">
        <h3><i class="fas fa-clock"></i> Verification Time</h3>
        <p>Employment verification usually takes 1-3 business days depending on your employer's response time and document complexity.</p>
      </div>
      <div class="info-card">
        <h3><i class="fas fa-shield-alt"></i> Data Privacy</h3>
        <p>Your employment and salary information is encrypted and shared only with verified landlords per your consent.</p>
      </div>
    </div>

    <!-- Rent Calculator -->
    <div class="rent-calculator">
      <h3><i class="fas fa-calculator"></i> 3x Rent Rule Calculator</h3>
      <div class="calculator-grid">
        <div class="calculator-item">
          <div class="calculator-label">Target Monthly Rent</div>
          <div class="currency-input">
            <input type="number" id="target-rent" placeholder="1200" class="calculator-input">
          </div>
        </div>
        <div class="calculator-item">
          <div class="calculator-label">Required Monthly Income</div>
          <div class="calculator-value" id="required-income">€ 3,600</div>
        </div>
        <div class="calculator-item">
          <div class="calculator-label">Your Monthly Net Income</div>
          <div class="currency-input">
            <input type="number" id="your-income" placeholder="4000" class="calculator-input">
          </div>
        </div>
        <div class="calculator-item">
          <div class="calculator-label">Qualification Status</div>
          <div class="calculator-value" id="qualification-status">Enter income above</div>
        </div>
      </div>
    </div>

    <!-- Alert Container -->
    <div id="alert-container"></div>

    <!-- Main Form -->
    <div class="employment-form" id="employment-form">
      <div class="form-header">
        <h2>Employment Verification Form</h2>
        <p>Provide accurate employment and income information for verification</p>
      </div>

      <form id="employment-verification-form">
        <!-- Employment Type Selection -->
        <div class="form-section">
          <h3><i class="fas fa-briefcase"></i> Employment Type</h3>
          <div class="employment-types">
            <label class="employment-type" for="permanent">
              <input type="radio" id="permanent" name="employmentType" value="permanent" required>
              <div class="employment-type-icon"><i class="fas fa-building"></i></div>
              <div class="employment-type-title">Permanent Employee</div>
              <div class="employment-type-desc">Full-time contract with fixed salary</div>
            </label>
            <label class="employment-type" for="temporary">
              <input type="radio" id="temporary" name="employmentType" value="temporary" required>
              <div class="employment-type-icon"><i class="fas fa-clock"></i></div>
              <div class="employment-type-title">Temporary Contract</div>
              <div class="employment-type-desc">Fixed-term employment contract</div>
            </label>
            <label class="employment-type" for="freelance">
              <input type="radio" id="freelance" name="employmentType" value="freelance" required>
              <div class="employment-type-icon"><i class="fas fa-laptop"></i></div>
              <div class="employment-type-title">Freelancer/Self-Employed</div>
              <div class="employment-type-desc">Independent contractor or business owner</div>
            </label>
          </div>
        </div>

        <!-- Employer Information -->
        <div class="form-section" id="employer-section">
          <h3><i class="fas fa-building"></i> Employer Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="company-name">Company Name <span class="required">*</span></label>
              <input type="text" id="company-name" name="companyName" placeholder="e.g., Mercedes-Benz AG" required>
            </div>
            <div class="form-group">
              <label for="company-address">Company Address</label>
              <input type="text" id="company-address" name="companyAddress" placeholder="e.g., Mercedesstraße 120, Stuttgart">
            </div>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label for="supervisor-name">Supervisor/HR Contact</label>
              <input type="text" id="supervisor-name" name="supervisorName" placeholder="e.g., Anna Schmidt">
            </div>
            <div class="form-group">
              <label for="supervisor-email">Supervisor Email</label>
              <input type="email" id="supervisor-email" name="supervisorEmail" placeholder="anna.schmidt@company.com">
              <div class="form-help">We'll contact them to verify your employment</div>
            </div>
          </div>
        </div>

        <!-- Employment Details -->
        <div class="form-section">
          <h3><i class="fas fa-id-badge"></i> Employment Details</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="job-title">Job Title <span class="required">*</span></label>
              <input type="text" id="job-title" name="jobTitle" placeholder="e.g., Software Engineer" required>
            </div>
            <div class="form-group">
              <label for="employment-start">Employment Start Date <span class="required">*</span></label>
              <input type="date" id="employment-start" name="employmentStart" required>
            </div>
          </div>
          <div class="form-grid" id="contract-end-group" style="display: none;">
            <div class="form-group">
              <label for="contract-end">Contract End Date</label>
              <input type="date" id="contract-end" name="contractEnd">
              <div class="form-help">For temporary contracts only</div>
            </div>
            <div class="form-group">
              <label for="employment-status">Employment Status</label>
              <select id="employment-status" name="employmentStatus">
                <option value="active">Active</option>
                <option value="probation">Probation Period</option>
                <option value="notice">Notice Period</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Income Information -->
        <div class="form-section">
          <h3><i class="fas fa-euro-sign"></i> Income Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="gross-salary">Monthly Gross Salary <span class="required">*</span></label>
              <div class="currency-input">
                <input type="number" id="gross-salary" name="grossSalary" placeholder="5000" step="0.01" required>
              </div>
              <div class="form-help">Before taxes and deductions</div>
            </div>
            <div class="form-group">
              <label for="net-salary">Monthly Net Salary <span class="required">*</span></label>
              <div class="currency-input">
                <input type="number" id="net-salary" name="netSalary" placeholder="3200" step="0.01" required>
              </div>
              <div class="form-help">After taxes and deductions</div>
            </div>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label for="additional-income">Additional Monthly Income</label>
              <div class="currency-input">
                <input type="number" id="additional-income" name="additionalIncome" placeholder="0" step="0.01">
              </div>
              <div class="form-help">Bonuses, commissions, rental income, etc.</div>
            </div>
            <div class="form-group">
              <label for="income-frequency">Income Frequency</label>
              <select id="income-frequency" name="incomeFrequency">
                <option value="monthly">Monthly</option>
                <option value="bi-weekly">Bi-weekly</option>
                <option value="weekly">Weekly</option>
                <option value="irregular">Irregular (Freelance)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Document Upload -->
        <div class="form-section">
          <h3><i class="fas fa-upload"></i> Required Documents</h3>
          <p style="margin-bottom: 20px; color: var(--text-muted); font-size: 14px;">
            Upload recent documents to verify your employment and income. All files are encrypted and securely processed.
          </p>
          
          <!-- Salary Slips -->
          <div class="form-group">
            <label>Recent Salary Slips (Last 3 months) <span class="required">*</span></label>
            <div class="file-upload" id="salary-upload">
              <div class="file-upload-icon">
                <i class="fas fa-file-invoice-dollar"></i>
              </div>
              <div class="file-upload-text">Upload Salary Slips</div>
              <div class="file-upload-hint">Upload 3 most recent monthly salary statements</div>
              <input type="file" id="salary-files" multiple accept=".jpg,.jpeg,.png,.pdf" style="display: none;">
            </div>
            <div id="salary-file-list" class="file-list"></div>
          </div>

          <!-- Employment Contract -->
          <div class="form-group">
            <label>Employment Contract <span class="required">*</span></label>
            <div class="file-upload" id="contract-upload">
              <div class="file-upload-icon">
                <i class="fas fa-file-contract"></i>
              </div>
              <div class="file-upload-text">Upload Employment Contract</div>
              <div class="file-upload-hint">Current employment contract or offer letter</div>
              <input type="file" id="contract-file" accept=".jpg,.jpeg,.png,.pdf" style="display: none;">
            </div>
            <div id="contract-file-list" class="file-list"></div>
          </div>

          <!-- Tax Documents (for freelancers) -->
          <div class="form-group" id="tax-documents-group" style="display: none;">
            <label>Tax Returns/Proof of Income</label>
            <div class="file-upload" id="tax-upload">
              <div class="file-upload-icon">
                <i class="fas fa-file-invoice"></i>
              </div>
              <div class="file-upload-text">Upload Tax Documents</div>
              <div class="file-upload-hint">Last year's tax return or income statements</div>
              <input type="file" id="tax-files" multiple accept=".jpg,.jpeg,.png,.pdf" style="display: none;">
            </div>
            <div id="tax-file-list" class="file-list"></div>
          </div>
        </div>

        <!-- Consent -->
        <div class="form-section">
          <h3><i class="fas fa-shield-alt"></i> Verification Consent</h3>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="employer-contact" name="employerContact" required>
              <span class="checkmark"></span>
              I authorize SichrPlace to contact my employer for employment verification. <span class="required">*</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="income-verification" name="incomeVerification" required>
              <span class="checkmark"></span>
              I confirm that all income information provided is accurate and complete. <span class="required">*</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="landlord-sharing" name="landlordSharing">
              <span class="checkmark"></span>
              I authorize sharing my employment verification with verified landlords on SichrPlace.
            </label>
          </div>
        </div>

        <!-- Submit Button -->
        <div style="text-align: center; margin-top: 30px;">
          <button type="submit" class="btn btn-primary btn-lg btn-full" id="submit-btn">
            <i class="fas fa-check"></i> Submit Employment Verification
          </button>
        </div>
      </form>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="results-section">
      <div class="results-header">
        <h2>Employment Verification Results</h2>
        <p>Your employment and income have been successfully verified</p>
      </div>

      <div class="qualification-status">
        <div class="status-badge qualified" id="overall-status">QUALIFIED</div>
      </div>

      <div class="results-grid">
        <div class="result-item">
          <div class="result-value" id="income-ratio">4.2:1</div>
          <div class="result-label">Income to Rent Ratio</div>
        </div>
        <div class="result-item">
          <div class="result-value" id="employment-risk">LOW</div>
          <div class="result-label">Employment Risk</div>
        </div>
        <div class="result-item">
          <div class="result-value" id="verification-date">2025-01-22</div>
          <div class="result-label">Verification Date</div>
        </div>
        <div class="result-item">
          <div class="result-value" id="meets-3x-rule">YES</div>
          <div class="result-label">Meets 3x Rule</div>
        </div>
      </div>

      <div style="text-align: center; margin-top: 25px;">
        <button class="btn btn-success btn-lg" id="download-verification">
          <i class="fas fa-download"></i> Download Verification
        </button>
        <button class="btn btn-secondary btn-lg" id="back-to-dashboard">
          <i class="fas fa-arrow-left"></i> Back to Dashboard
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Configuration
    const API_BASE_URL = '/.netlify/functions/tenant-screening';
    let uploadedFiles = {};
    let currentEmploymentType = null;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      initializeEmploymentForm();
      setupEventListeners();
      setupFileUploads();
      setupCalculator();
      checkViewMode();
    });

    function initializeEmploymentForm() {
      // Get apartment ID from URL params
      const urlParams = new URLSearchParams(window.location.search);
      const apartmentId = urlParams.get('apartment');
      
      if (apartmentId) {
        console.log('Processing employment verification for apartment:', apartmentId);
      }
    }

    function checkViewMode() {
      const urlParams = new URLSearchParams(window.location.search);
      const viewMode = urlParams.get('view');
      
      if (viewMode === 'results') {
        showResults();
      }
    }

    function setupEventListeners() {
      // Form submission
      document.getElementById('employment-verification-form').addEventListener('submit', handleFormSubmit);

      // Employment type selection
      document.querySelectorAll('input[name="employmentType"]').forEach(radio => {
        radio.addEventListener('change', handleEmploymentTypeChange);
      });

      // Back to dashboard
      document.getElementById('back-to-dashboard').addEventListener('click', function() {
        window.location.href = 'tenant-screening-dashboard.html';
      });

      // Download verification
      document.getElementById('download-verification').addEventListener('click', downloadVerification);

      // Income calculations
      document.getElementById('net-salary').addEventListener('input', updateCalculator);
      document.getElementById('additional-income').addEventListener('input', updateCalculator);
    }

    function setupCalculator() {
      // Target rent input
      document.getElementById('target-rent').addEventListener('input', function() {
        const rent = parseFloat(this.value) || 0;
        const requiredIncome = rent * 3;
        document.getElementById('required-income').textContent = `€ ${requiredIncome.toLocaleString()}`;
        updateCalculator();
      });

      // Your income input
      document.getElementById('your-income').addEventListener('input', updateCalculator);
    }

    function updateCalculator() {
      const targetRent = parseFloat(document.getElementById('target-rent').value) || 0;
      const yourIncome = parseFloat(document.getElementById('your-income').value) || 
                        parseFloat(document.getElementById('net-salary').value) || 0;
      const additionalIncome = parseFloat(document.getElementById('additional-income').value) || 0;
      
      const totalIncome = yourIncome + additionalIncome;
      const requiredIncome = targetRent * 3;
      const statusElement = document.getElementById('qualification-status');

      // Update your income in calculator if net salary is filled
      if (document.getElementById('net-salary').value && !document.getElementById('your-income').value) {
        document.getElementById('your-income').value = document.getElementById('net-salary').value;
      }

      if (targetRent > 0 && totalIncome > 0) {
        if (totalIncome >= requiredIncome) {
          statusElement.textContent = '✓ QUALIFIED';
          statusElement.style.color = 'var(--success)';
        } else {
          statusElement.textContent = '✗ NOT QUALIFIED';
          statusElement.style.color = 'var(--error)';
        }
      } else {
        statusElement.textContent = 'Enter income above';
        statusElement.style.color = 'var(--text-muted)';
      }
    }

    function handleEmploymentTypeChange(e) {
      currentEmploymentType = e.target.value;
      
      // Update UI based on employment type
      const contractEndGroup = document.getElementById('contract-end-group');
      const taxDocumentsGroup = document.getElementById('tax-documents-group');
      const employerSection = document.getElementById('employer-section');

      // Update selected employment type card
      document.querySelectorAll('.employment-type').forEach(card => {
        card.classList.remove('selected');
      });
      e.target.closest('.employment-type').classList.add('selected');

      // Show/hide relevant sections
      if (currentEmploymentType === 'temporary') {
        contractEndGroup.style.display = 'grid';
      } else {
        contractEndGroup.style.display = 'none';
      }

      if (currentEmploymentType === 'freelance') {
        taxDocumentsGroup.style.display = 'block';
        employerSection.style.display = 'none';
        
        // Update labels for freelancers
        document.querySelector('label[for="company-name"]').innerHTML = 'Business Name <span class="required">*</span>';
        document.querySelector('label[for="job-title"]').innerHTML = 'Profession/Services <span class="required">*</span>';
      } else {
        taxDocumentsGroup.style.display = 'none';
        employerSection.style.display = 'block';
        
        // Restore labels for employees
        document.querySelector('label[for="company-name"]').innerHTML = 'Company Name <span class="required">*</span>';
        document.querySelector('label[for="job-title"]').innerHTML = 'Job Title <span class="required">*</span>';
      }
    }

    function setupFileUploads() {
      setupFileUpload('salary-upload', 'salary-files', 'salary-file-list', 'salarySlips', true);
      setupFileUpload('contract-upload', 'contract-file', 'contract-file-list', 'employmentContract', false);
      setupFileUpload('tax-upload', 'tax-files', 'tax-file-list', 'taxDocuments', true);
    }

    function setupFileUpload(uploadAreaId, fileInputId, fileListId, fileType, multiple) {
      const uploadArea = document.getElementById(uploadAreaId);
      const fileInput = document.getElementById(fileInputId);
      const fileList = document.getElementById(fileListId);

      // Click to upload
      uploadArea.addEventListener('click', () => fileInput.click());

      // File selection
      fileInput.addEventListener('change', function() {
        handleFileSelection(this.files, fileListId, fileType, multiple);
      });

      // Drag and drop
      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        this.classList.add('dragover');
      });

      uploadArea.addEventListener('dragleave', function(e) {
        e.preventDefault();
        this.classList.remove('dragover');
      });

      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        this.classList.remove('dragover');
        handleFileSelection(e.dataTransfer.files, fileListId, fileType, multiple);
      });
    }

    function handleFileSelection(files, fileListId, fileType, multiple) {
      const fileList = document.getElementById(fileListId);
      
      if (multiple) {
        if (!uploadedFiles[fileType]) {
          uploadedFiles[fileType] = [];
        }
        Array.from(files).forEach(file => {
          if (validateFile(file)) {
            uploadedFiles[fileType].push(file);
          }
        });
        displayMultipleFiles(uploadedFiles[fileType], fileList, fileType);
      } else {
        const file = files[0];
        if (file && validateFile(file)) {
          uploadedFiles[fileType] = file;
          displayFile(file, fileList, fileType);
        }
      }
    }

    function validateFile(file) {
      const maxSize = 10 * 1024 * 1024; // 10MB
      const allowedTypes = ['image/jpeg', 'image/png', 'application/pdf'];

      if (file.size > maxSize) {
        showAlert('File size must be less than 10MB', 'error');
        return false;
      }

      if (!allowedTypes.includes(file.type)) {
        showAlert('Only JPG, PNG, and PDF files are allowed', 'error');
        return false;
      }

      return true;
    }

    function displayFile(file, container, fileType) {
      container.innerHTML = '';
      
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      fileItem.innerHTML = `
        <div class="file-info">
          <i class="fas fa-file-${getFileIcon(file.type)}"></i>
          <span>${file.name}</span>
          <small>(${formatFileSize(file.size)})</small>
        </div>
        <i class="fas fa-times file-remove" onclick="removeFile('${fileType}', this, false)"></i>
      `;
      
      container.appendChild(fileItem);
    }

    function displayMultipleFiles(files, container, fileType) {
      container.innerHTML = '';
      
      files.forEach((file, index) => {
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `
          <div class="file-info">
            <i class="fas fa-file-${getFileIcon(file.type)}"></i>
            <span>${file.name}</span>
            <small>(${formatFileSize(file.size)})</small>
          </div>
          <i class="fas fa-times file-remove" onclick="removeFileFromArray('${fileType}', ${index}, this)"></i>
        `;
        
        container.appendChild(fileItem);
      });
    }

    function removeFile(fileType, element, isArray) {
      if (isArray) {
        delete uploadedFiles[fileType];
      } else {
        delete uploadedFiles[fileType];
      }
      element.closest('.file-item').remove();
    }

    function removeFileFromArray(fileType, index, element) {
      uploadedFiles[fileType].splice(index, 1);
      if (uploadedFiles[fileType].length === 0) {
        delete uploadedFiles[fileType];
      }
      element.closest('.file-item').remove();
      
      // Re-display remaining files
      const container = element.closest('.file-list');
      if (uploadedFiles[fileType] && uploadedFiles[fileType].length > 0) {
        displayMultipleFiles(uploadedFiles[fileType], container, fileType);
      }
    }

    function getFileIcon(mimeType) {
      if (mimeType.includes('pdf')) return 'pdf';
      if (mimeType.includes('image')) return 'image';
      return 'file';
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    async function handleFormSubmit(e) {
      e.preventDefault();
      
      const submitBtn = document.getElementById('submit-btn');
      const originalText = submitBtn.innerHTML;
      
      try {
        // Show loading state
        submitBtn.innerHTML = '<span class="loading">Processing Employment Verification</span>';
        submitBtn.disabled = true;

        // Validate required files
        if (!uploadedFiles.salarySlips || uploadedFiles.salarySlips.length < 3) {
          throw new Error('Please upload at least 3 recent salary slips');
        }
        if (!uploadedFiles.employmentContract) {
          throw new Error('Please upload your employment contract');
        }
        if (currentEmploymentType === 'freelance' && !uploadedFiles.taxDocuments) {
          throw new Error('Please upload tax documents for freelance verification');
        }

        // Collect form data
        const formData = new FormData(e.target);
        
        // Add employment type
        formData.append('employmentType', currentEmploymentType);
        
        // Add files to form data
        Object.entries(uploadedFiles).forEach(([key, files]) => {
          if (Array.isArray(files)) {
            files.forEach((file, index) => {
              formData.append(`${key}[${index}]`, file);
            });
          } else {
            formData.append(key, files);
          }
        });

        // Mock API call - replace with actual API
        await mockEmploymentSubmission(formData);

        // Show success and redirect to results
        showAlert('Employment verification submitted successfully! We will contact your employer within 1-2 business days.', 'success');
        
        setTimeout(() => {
          showResults();
        }, 2000);

      } catch (error) {
        console.error('Employment verification error:', error);
        showAlert(error.message || 'Failed to submit employment verification. Please try again.', 'error');
        
        // Restore button
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    }

    async function mockEmploymentSubmission(formData) {
      // Simulate API delay
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Mock successful response
      return {
        success: true,
        verificationId: 'EMP_' + Date.now(),
        estimatedCompletion: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString()
      };
    }

    function showResults() {
      // Hide form and show results
      document.getElementById('employment-form').style.display = 'none';
      document.getElementById('results-section').style.display = 'block';
      
      // Mock results data
      const mockResults = {
        incomeRatio: '4.2:1',
        employmentRisk: 'LOW',
        verificationDate: '2025-01-22',
        meetsThreeTimesRule: 'YES',
        overallStatus: 'QUALIFIED'
      };

      // Update results display
      document.getElementById('income-ratio').textContent = mockResults.incomeRatio;
      document.getElementById('employment-risk').textContent = mockResults.employmentRisk;
      document.getElementById('verification-date').textContent = mockResults.verificationDate;
      document.getElementById('meets-3x-rule').textContent = mockResults.meetsThreeTimesRule;
      document.getElementById('overall-status').textContent = mockResults.overallStatus;
    }

    function downloadVerification() {
      // Mock verification download
      const link = document.createElement('a');
      link.href = '#'; // Replace with actual verification URL
      link.download = 'Employment_Verification_2025.pdf';
      link.click();
      
      showAlert('Verification download started', 'success');
    }

    function showAlert(message, type) {
      const alertContainer = document.getElementById('alert-container');
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert ${type}`;
      alertDiv.innerHTML = `
        <i class="fas fa-${getAlertIcon(type)}"></i>
        ${message}
      `;

      alertContainer.appendChild(alertDiv);

      // Auto-remove after 5 seconds
      setTimeout(() => {
        alertDiv.remove();
      }, 5000);
    }

    function getAlertIcon(type) {
      switch (type) {
        case 'success': return 'check-circle';
        case 'warning': return 'exclamation-triangle';
        case 'error': return 'times-circle';
        default: return 'info-circle';
      }
    }

    // Checkbox styling
    const style = document.createElement('style');
    style.textContent = `
      .checkbox-label {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        cursor: pointer;
        line-height: 1.4;
      }
      
      .checkbox-label input[type="checkbox"] {
        width: auto;
        margin: 0;
      }
      
      .checkbox-label a {
        color: var(--primary);
        text-decoration: none;
      }
      
      .checkbox-label a:hover {
        text-decoration: underline;
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>